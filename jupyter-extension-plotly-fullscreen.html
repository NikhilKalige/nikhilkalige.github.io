<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Jupyter Extension: Plotly-Fullscreen | ShortCircuits</title>
    <meta name=viewport content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Quattrocento:400,700|Quattrocento+Sans:400,400i,700|Inconsolata" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/index.min.css"/>
    <link rel="shortcut icon" href="/static/images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/static/images/favicon.ico" type="image/x-icon">
    <meta name="description" content="Plotly is a new plotting library that supports an array of languages. It also supports python and most importantly it can be used to plot offline and integrates very well with jupyter notebooks. It thus serves as a good alternative for existing popular libraries like matplotlib and bokeh. I have ...">
    <meta name="keywords" content="Ipython,Plotly,Jupyter,Matplotlib,Seaborn">
    <meta name="author" content="Nikhil K">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-TRCDV4"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TRCDV4');</script>
<!-- End Google Tag Manager -->
    <div class="gradient-overlay"></div>
    <div class="wrapper">
        <header>
            <div class="header clearfix">
            <div class="logo">
                <a href="/" itemprop="url">
                    <img alt="Logo" src="/static/images/logo.svg" />
                </a>
            </div>
            <nav itemprop="breadcrumb">
                <ul>
                    <li><a href="/projects">Projects</a></li>
                    <li><a href="/">Blog</a></li>
                    <li><a href="/about">About</a></li>
                </ul>
            </nav>
        </header>

        <section id="container" itemprop="http://schema.org/mainContentOfPage">
<article itemscope itemtype="http://schema.org/Article">
    <h1 class="title" itemprop="name">
        <a href="/jupyter-extension-plotly-fullscreen.html" rel="bookmark"
           title="Permalink to Jupyter Extension: Plotly-Fullscreen"> Jupyter Extension:&nbsp;Plotly-Fullscreen</a>
    </h1>

    <div class="post-header">
        <div class="meta-info">
            <div class="post-date">
                <span itemprop="dateCreated" datetime="2016-07-29">
                    July 29, 2016
                </span>
            </div>
        </div>
    </div>
    <div class="post-body" itemprop="articleBody">
        
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><a href="https://plot.ly/">Plotly</a> is a new plotting library that supports an array of languages. It also supports python and most importantly it can be used to plot offline and integrates very well with <a href="https://jupyter.org/">jupyter</a> notebooks. It thus serves as a good alternative for existing popular libraries like <a href="http://matplotlib.org/">matplotlib</a> and <a href="http://bokeh.pydata.org/en/latest/">bokeh</a>.</p>
<p>I have always been attracted towards pretty <span class="caps">UI</span>&#8217;s and plotly excels at generating them without any effort on your part and you can argue that you can generate pretty graphs using matplotlib too. I would not disagree against that point as I am currently using <a href="https://stanford.edu/~mwaskom/software/seaborn/">seaborn</a> with <a href="http://matplotlib.org/">matplotlib</a> to do the&nbsp;same.</p>
<p>Now let me come to the point, I needed to generate graphs for my robot optimization task and the process would generate lots of data and I needed the data to be plotted in real-time(not real real-time). By this time I was in love with plotly and I wanted to make it work with plotly. I had a few requirements for&nbsp;that.</p>
<ol>
<li>The graphs needed to be big, as the plots in jupyter notebooks are very&nbsp;small.</li>
<li>The graphs should be able to update itself as data gets&nbsp;added.</li>
</ol>
<p>I started off to accomplish the first part and this brings me to this post on how I created a jupyter extension to create full-screen graphs for plotly. Jupyter has good <a href="https://jupyter-notebook.readthedocs.io/en/latest/extending/frontend_extensions.html">documentation</a> on how you can extend the notebook by creating custom frontend extensions. I wanted to add a button that could then be used to expand the graphs to occupy the entire real estate of my big&nbsp;screen.</p>
<p>Jupyter extension [Ploty-Fullscreen][1] can be installed and enabled using the following&nbsp;commands</p>
<div class="highlight"><pre><span></span>jupyter nbextension install <span class="sb">`</span><span class="nv">$PWD</span><span class="sb">`</span>/plotly-fullscreen --symlink --user
<span class="c1"># Enable the extension and here we use main because our javascript resides in</span>
<span class="c1"># plotly-fullscreen/main.js file</span>
jupyter nbextension <span class="nb">enable</span> plotly-fullscreen/main --user
</pre></div>
<p>Jupyter frontend extension is a javascript file that defines an <span class="caps">AMD</span> module. The file should expose a function <code>load_ipython_extension</code> that will be called when the module is loaded and can be used to initialize the&nbsp;extension.</p>
<div class="highlight"><pre><span></span><span class="nx">define</span><span class="p">([</span>
    <span class="s1">'base/js/namespace'</span><span class="p">,</span>
    <span class="s1">'base/js/events'</span><span class="p">,</span>
    <span class="s1">'require'</span>
<span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Jupyter</span><span class="p">,</span> <span class="nx">events</span><span class="p">,</span> <span class="nx">require</span><span class="p">)</span> <span class="p">{</span>

   <span class="kd">function</span> <span class="nx">load_ipython_extension</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// Initialization</span>

   <span class="p">}</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="nx">load_ipython_extension</span><span class="o">:</span> <span class="nx">load_ipython_extension</span>
    <span class="p">};</span>
<span class="p">});</span>
</pre></div>
<p>The <code>Jupyter</code> variable contains a lot of functionality and the <code>events</code> can be used to listen to events generated by the notebook in a style similar to jQuery. The button is created by listening to two&nbsp;events</p>
<ol>
<li><code>kernel_ready.Kernel</code> - We listen to this event because we want the graphs to have a button when we first load the&nbsp;notebook.</li>
<li><code>plotly_afterplot</code> - Plotly generates this event after the graph has been&nbsp;plotted.</li>
</ol>
<p>Let&#8217;s plot a graph and see how this extension&nbsp;works.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">plotly.offline</span> <span class="k">import</span> <span class="n">init_notebook_mode</span><span class="p">,</span> <span class="n">iplot</span>
<span class="kn">from</span> <span class="nn">plotly.tools</span> <span class="k">import</span> <span class="n">FigureFactory</span> <span class="k">as</span> <span class="n">FF</span>

<span class="n">init_notebook_mode</span><span class="p">()</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">,</span> <span class="mi">2000</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="n">t</span><span class="o">**</span><span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="mf">0.3</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2000</span><span class="p">))</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">t</span><span class="o">**</span><span class="mi">6</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="mf">0.3</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">2000</span><span class="p">))</span>


<span class="n">fig</span> <span class="o">=</span> <span class="n">FF</span><span class="o">.</span><span class="n">create_2D_density</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">hist_color</span><span class="o">=</span><span class="s1">'#1b53b9'</span><span class="p">,</span> <span class="n">point_size</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

<span class="n">iplot</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img alt="Graph in expand button" src="/images/2016/plotly-small.png">
You can see the button on the top left of the graph that can be now pressed to expand the graph. The graph now scales to strech the smallest of the screen dimensions as seen in the below image, the solution is not perfect as the tooltips seem to have gone haywire.</img></p>
<p><img alt="Graph Fullscreen" src="/images/2016/plotly-fullscreen.png" /></p>
<p>Now that we have seen how the extension works let&#8217;s go back to my graph problem. I solved the fullscreen problem, but I was unable think of straight solution to get the graph updates working without it involving more of javascript magic as I wanted the solution to be in python. So finally I went back and used matplotlib with&nbsp;seaborn.</p>
<h3 id="References-and-Links">References and Links<a class="anchor-link" href="#References-and-Links">¶</a></h3><ol>
<li><a href="https://github.com/nikhilkalige/plotly-fullscreen" title="Plotly-Fullscreen">Plotly-Fullscreen-Extension</a></li>
<li><a href="https://raw.githubusercontent.com/nikhilkalige/nikhilkalige.github.io/develop/content/2016/jupyter-extension-plotly-fullscreen.ipynb">Jupyter Notebook&nbsp;file</a></li>
</ol>
</div>
</div>
</div>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: 'center'," +
        "    displayIndent: '0em'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['$','$'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }" +
        "    } " +
        "}); ";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>

    </div>
<div class="post-footer">
        <h4>Tags</h4>
        <div class="post-tags">
                <a itemprop="keywords" href="/tag/ipython.html">Ipython</a>
                <a itemprop="keywords" href="/tag/plotly.html">Plotly</a>
                <a itemprop="keywords" href="/tag/jupyter.html">Jupyter</a>
                <a itemprop="keywords" href="/tag/matplotlib.html">Matplotlib</a>
                <a itemprop="keywords" href="/tag/seaborn.html">Seaborn</a>
        </div>
</div></article>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'shortcircuits';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>        </section>
    </div>
    <script type="text/javascript">
        {
            var class_names = ["projects", "blog", "about"];
            var li_elements = document.getElementsByTagName("nav")[0]
                .getElementsByTagName("li");

            for (var i = class_names.length - 1; i >= 0; i--) {
                if(document.getElementById(class_names[i])) {
                    var ele = li_elements[i];
                    ele.className += "active";
                }
            }
        }
        {
            var iframes = document.querySelectorAll("[src*='youtube']");
            function center(ele) {
                ele.parentElement.style.textAlign = "center";
            }
            iframes.forEach(center);
        }
    </script>
</body>
</html>