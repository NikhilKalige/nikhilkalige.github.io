<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Quadrotor Flips Optimization using CMA-ES | ShortCircuits</title>
    <meta name=viewport content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Quattrocento:400,700|Quattrocento+Sans:400,400i,700|Inconsolata" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/index.min.css"/>
    <link rel="shortcut icon" href="/static/images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/static/images/favicon.ico" type="image/x-icon">
    <meta name="description" content="Quadrotors have fascinated me for a long time. There has been an enormous amount of research with these small machines leading to a lot of cool experiments and products over the past few years. Machine learning techniques have been used in a lot of research papers to optimize the flight ...">
    <meta name="keywords" content="Python,Quadrotor,CMA-ES">
    <meta name="author" content="Nikhil K">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-TRCDV4"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-TRCDV4');</script>
<!-- End Google Tag Manager -->
    <div class="gradient-overlay"></div>
    <div class="wrapper">
        <header>
            <div class="header clearfix">
            <div class="logo">
                <a href="/" itemprop="url">
                    <img alt="Logo" src="/static/images/logo.svg" />
                </a>
            </div>
            <nav itemprop="breadcrumb">
                <ul>
                    <li><a href="/projects">Projects</a></li>
                    <li><a href="/">Blog</a></li>
                    <li><a href="/about">About</a></li>
                </ul>
            </nav>
        </header>

        <section id="container" itemprop="http://schema.org/mainContentOfPage">
<article itemscope itemtype="http://schema.org/Article">
    <h1 class="title" itemprop="name">
        <a href="/quadrotor-flips-optimization.html" rel="bookmark"
           title="Permalink to Quadrotor Flips Optimization using CMA-ES"> Quadrotor Flips Optimization using <span class="caps">CMA</span>-<span class="caps">ES</span></a>
    </h1>

    <div class="post-header">
        <div class="meta-info">
            <div class="post-date">
                <span itemprop="dateCreated" datetime="2016-08-05">
                    August 05, 2016
                </span>
            </div>
        </div>
    </div>
    <div class="post-body" itemprop="articleBody">
        <p>Quadrotors have fascinated me for a long time. There has been an enormous amount of research with these small machines leading to a lot of cool experiments and products over the past few years. Machine learning techniques have been used in a lot of research papers to optimize the flight. I wanted to learn how you can perform the task using Python and apply machine learning techniques. I started hunting for articles on this topic and among the humongous list, I found that I liked the paper <a href="http://flyingmachinearena.org/wp-content/publications/2010/lupashin2010-AdaptiveFlips.pdf">A Simple Learning Strategy for High-Speed Quadrocopter Multi-Flips</a> the most. The article is written by <em>Sergei Lupashin, Angela Schollig, Michael Sherback, Raffaello D’Andrea</em> from group <a href="http://flyingmachinearena.org/">Flying Machine Arena</a>.</p>
<p>Acrobatic maneuvers are tough to perform on quadrotors as they require precise control over the thrust that is applied to the motors. The paper describes how machine learning technique can be used to perform flips along one of the axes at a high rotation rate of 1600 degrees/second and return to the starting position without any human intervention. Let me give a very brief overview the approach used in the&nbsp;paper.</p>
<p>Quadrotors are sophisticated devices that are influenced by a lot of factors. So rather than making use of higher order model, most of the researchers go ahead with a simplistic lower order model as this reduces the complexities introduced by the higher order models without compromising the accuracy of the model. A quadrotor has four motors, and primitively it can be modeled as the collective forces generated by the four motors and gravitational force acting on it. The movement of the quadrotor for this maneuver is controlled using the collective acceleration value applied to the all the motors, this value is then broken down into multiple control parameters based on a <span class="caps">PI</span> controller. A control envelope is used to restrict input values&nbsp;generated.</p>
<p>The flip is performed in 5 steps and is defined by five parameters, and simplistically they are the acceleration and period for which the force is applied. These form the values that are optimized to gain better performance. Initially, a rough guess of the initial values of the five control parameters is provided to the optimization algorithm. The roughly estimated parameters are fed to an optimizer that is running an algorithm like <span class="caps">CMA</span>-<span class="caps">ES</span> to obtain the best set of values. The algorithm makes use of the simple low order quadrotor model to perform the optimization. The optimal parameters obtained from the optimizer are then fed to the quadrotor to carry out the flips in real&nbsp;time.</p>
<p>The entire algorithm is implemented using Python. The quadrotor model makes of <a href="http://www.numpy.org/">numpy</a> array methods and <code>odeint</code> from <a href="https://www.scipy.org/">scipy</a> to perform the integration. <span class="caps">CMA</span>-<span class="caps">ES</span> is used as the optimization library, and the implementation by <a href="https://github.com/DEAP/deap">deap</a> framework is used. The library can be found on <a href="https://github.com/nikhilkalige/quadrotor">github</a>.</p>
<p>The generated data can be visualized using <a href="http://matplotlib.org/">matplotlib</a> or through <a href="http://blender.org/">blender</a>. You can see the results from an incomplete simulation using both the visualization&nbsp;methods</p>
<h3>Matplotlib&nbsp;Result</h3>
<figure><img alt="Matplotlib Based 3d Plot" src="/images/2016/quadrotor_matplotlib.gif" width="530" /><figcaption>Matplotlib Based 3d Plot</figcaption>
</figure>
<h3>Blender&nbsp;Animation</h3>
<p>
<iframe allowfullscreen="true" frameborder="0" height="450" src="//www.youtube.com/embed/aoSr-yHOgnQ" width="800"></iframe>
</p>
<h3>Conclusion</h3>
<p>I would like to point out that these are my personal opinions and I you have any valid concerns related to the post please let me know. The library is modular and hence feel free to utilize it in any of your&nbsp;ventures.</p>
<h3>References and&nbsp;Links</h3>
<ol>
<li>A Simple Learning Strategy for High-Speed Quadrocopter Multi-Flips<ul>
<li>Sergei Lupashin, Angela Sch ̈ollig, Michael Sherback, Raffaello&nbsp;D’Andrea</li>
</ul>
</li>
<li>Adaptive Open-Loop Aerobatic Maneuvers for Quadrocopters<ul>
<li>Sergei Lupashin, Rafaello&nbsp;D’Andrea</li>
</ul>
</li>
<li>Adaptive fast open-loop maneuvers for quadrocopters<ul>
<li>Sergei Lupashin, Rafaello&nbsp;D’Andrea</li>
</ul>
</li>
</ol>
    </div>
<div class="post-footer">
        <h4>Tags</h4>
        <div class="post-tags">
                <a itemprop="keywords" href="/tag/python.html">Python</a>
                <a itemprop="keywords" href="/tag/quadrotor.html">Quadrotor</a>
                <a itemprop="keywords" href="/tag/cma-es.html">CMA-ES</a>
        </div>
</div></article>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'shortcircuits';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>        </section>
    </div>
    <script type="text/javascript">
        {
            let class_names = ["projects", "blog", "about"];
            let li_elements = document.getElementsByTagName("nav")[0]
                .getElementsByTagName("li");
            for(let [idx, value] of class_names.entries()) {
                if(document.getElementById(value)) {
                    let ele = li_elements[idx];
                    ele.className += "active";
                }
            }
        }
        {
            let iframes = document.querySelectorAll("[src*='youtube']");
            function center(ele) {
                ele.parentElement.style.textAlign = "center";
            }
            iframes.forEach(center);
        }
    </script>
</body>
</html>